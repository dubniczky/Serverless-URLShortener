<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Secure URL Shortener</title>
        <style>
            body {
                font-family: 'Open Sans', sans-serif;
                margin: 0 auto 0 auto;  
                width: 100%;
                text-align: center;
                margin: 20px 0px 20px 0px;

                background-color: #000000;
                /* background-image: url(./background.svg); */
                background-image: url('data:image/svg+xml,%3Csvg height="600" viewBox="0 0 900 600" width="900" xmlns="http://www.w3.org/2000/svg"%3E%3Cpath d="m0 0h900v600h-900z" fill="%23001220"/%3E%3Cg transform="translate(900)"%3E%3Cpath d="m0 459.7c-16.9-14.5-33.8-29-52-31.8-18.1-2.9-37.6 6-53.5.3s-28.3-25.8-44.1-33.6c-15.9-7.8-35.3-3.2-57.2-.6-21.9 2.7-46.2 3.3-53.4-17.1-7.2-20.3 2.7-61.7.9-84.2s-15.4-26.2-43.8-24.1c-28.5 2-71.9 9.7-75.2-7.5-3.4-17.1 33.3-59.1 29.4-78s-48.4-14.7-70.9-23.9c-22.6-9.1-23.2-31.6-13.2-52.5 10-20.8 30.6-40 28-57.5-2.7-17.5-28.7-33.4-54.7-49.2h459.7z" fill="%230c1c30"/%3E%3Cpath d="m0 402.2c-14.8-12.6-29.5-25.3-45.5-27.8-15.9-2.5-32.9 5.2-46.8.3-14-5-24.7-22.6-38.6-29.4-13.9-6.9-30.9-2.8-50.1-.5-19.1 2.3-40.4 2.8-46.7-15-6.2-17.8 2.4-54 .8-73.7s-13.4-22.9-38.4-21.1c-24.9 1.8-62.8 8.5-65.7-6.5-3-15 29.1-51.7 25.7-68.3-3.4-16.5-42.3-12.9-62-20.9-19.8-8-20.4-27.7-11.6-45.9 8.7-18.2 26.8-35 24.5-50.4-2.3-15.3-25.1-29.1-47.8-43h402.2z" fill="%23312c4f"/%3E%3Cpath d="m0 344.8c-12.7-10.9-25.3-21.8-39-23.9-13.6-2.1-28.2 4.5-40.2.2-11.9-4.2-21.1-19.3-33-25.2-11.9-5.8-26.5-2.3-42.9-.4-16.4 2-34.6 2.5-40-12.8s2-46.3.6-63.2c-1.3-16.9-11.5-19.6-32.9-18.1-21.3 1.5-53.8 7.3-56.3-5.5-2.6-12.9 25-44.4 22-58.6-2.9-14.2-36.2-11-53.2-17.9-16.9-6.9-17.4-23.7-9.9-39.3 7.5-15.7 23-30.1 21-43.2-2-13.2-21.5-25-41-36.9h344.8z" fill="%23623965"/%3E%3Cpath d="m0 287.3c-10.6-9-21.1-18.1-32.5-19.9-11.3-1.8-23.5 3.8-33.5.2-9.9-3.5-17.6-16.1-27.5-21s-22.1-2-35.8-.3c-13.6 1.6-28.8 2-33.3-10.7-4.5-12.8 1.7-38.6.5-52.7-1.1-14-9.6-16.3-27.4-15-17.8 1.2-44.9 6-47-4.7-2-10.7 20.9-36.9 18.5-48.8-2.5-11.8-30.3-9.2-44.4-14.9s-14.5-19.8-8.3-32.8c6.3-13 19.2-25 17.6-36-1.7-10.9-18-20.8-34.2-30.7h287.3z" fill="%2396446e"/%3E%3Cpath d="m0 229.9c-8.4-7.3-16.9-14.6-26-16s-18.8 3-26.8.2c-7.9-2.8-14.1-12.9-22-16.8-8-3.9-17.7-1.6-28.6-.3s-23.1 1.6-26.7-8.5c-3.6-10.2 1.4-30.9.5-42.2-1-11.2-7.7-13-22-12-14.2 1-35.9 4.8-37.6-3.7-1.6-8.6 16.7-29.6 14.8-39-2-9.5-24.2-7.4-35.5-12s-11.6-15.8-6.6-26.2c5-10.5 15.3-20.1 14-28.8-1.3-8.8-14.4-16.7-27.4-24.6h229.9z" fill="%23c55469"/%3E%3Cpath d="m0 172.4c-6.3-5.4-12.7-10.9-19.5-12-6.8-1-14.1 2.3-20.1.2-5.9-2.2-10.6-9.7-16.5-12.6-6-3-13.3-1.2-21.5-.2-8.2.9-17.3 1.2-20-6.5-2.7-7.6 1.1-23.1.4-31.5-.7-8.5-5.8-9.9-16.5-9.1s-26.9 3.7-28.2-2.8c-1.2-6.4 12.5-22.1 11.1-29.2-1.5-7.1-18.2-5.6-26.6-9-8.5-3.4-8.7-11.9-5-19.7 3.8-7.8 11.5-15 10.5-21.6-1-6.5-10.7-12.5-20.5-18.4h172.4z" fill="%23e9705a"/%3E%3Cpath d="m0 114.9c-4.2-3.6-8.4-7.2-13-7.9-4.5-.7-9.4 1.5-13.4 0-4-1.4-7-6.4-11-8.4-4-1.9-8.8-.7-14.3-.1-5.5.7-11.5.8-13.3-4.3s.6-15.4.2-21c-.5-5.7-3.9-6.6-11-6.1s-17.9 2.5-18.8-1.8c-.8-4.3 8.4-14.8 7.4-19.5-1-4.8-12.1-3.7-17.8-6-5.6-2.3-5.8-7.9-3.3-13.1s7.7-10 7-14.4c-.6-4.4-7.1-8.3-13.6-12.3h114.9z" fill="%23fa9845"/%3E%3Cpath d="m0 57.5c-2.1-1.8-4.2-3.7-6.5-4-2.3-.4-4.7.7-6.7 0s-3.5-3.2-5.5-4.2-4.4-.4-7.2 0c-2.7.3-5.7.4-6.6-2.2-.9-2.5.3-7.7.1-10.5s-1.9-3.3-5.5-3c-3.6.2-9 1.2-9.4-1-.4-2.1 4.2-7.3 3.7-9.7s-6.1-1.9-8.9-3-2.9-4-1.6-6.6c1.2-2.6 3.8-5 3.5-7.2-.4-2.1-3.6-4.1-6.9-6.1h57.5z" fill="%23fbae3c"/%3E%3C/g%3E%3Cg transform="translate(0 600)"%3E%3Cpath d="m0-459.7c17.7 11.1 35.5 22.1 52.1 30.8 16.6 8.8 32 15.2 49.4 17.2 17.3 2.1 36.5-.2 51.7 7.8s26.5 26.2 36.9 41.7c10.4 15.6 19.9 28.4 38.3 31.4 18.4 2.9 45.7-4 64 .7 18.4 4.7 27.8 21.1 42.9 33 15.2 12 36.1 19.6 43 36 7 16.3-.1 41.4 6.9 58.9s28.1 27.4 31.8 44c3.8 16.7-9.9 40-14.1 58.9-4.2 18.8 1 33.1 12.1 48.9 11 15.8 27.8 33.1 44.7 50.4h-459.7z" fill="%230c1c30"/%3E%3Cpath d="m0-402.2c15.5 9.6 31 19.3 45.6 27 14.5 7.6 28 13.2 43.2 15 15.1 1.8 31.9-.2 45.2 6.8 13.4 7 23.2 22.9 32.3 36.5s17.4 24.8 33.5 27.4 40-3.5 56.1.7c16 4.1 24.3 18.4 37.5 28.9 13.3 10.4 31.6 17.1 37.6 31.4 6.1 14.3-.1 36.3 6 51.6 6.2 15.3 24.6 24 27.9 38.5 3.3 14.6-8.6 35-12.3 51.5s.8 29 10.5 42.8c9.6 13.8 24.4 29 39.1 44.1h-402.2z" fill="%23312c4f"/%3E%3Cpath d="m0-344.8c13.3 8.3 26.6 16.6 39.1 23.2 12.4 6.5 24 11.3 37 12.8 13 1.6 27.4-.1 38.8 5.9 11.4 5.9 19.9 19.6 27.7 31.3 7.7 11.6 14.9 21.3 28.7 23.5s34.3-3 48 .5c13.8 3.6 20.8 15.8 32.2 24.8s27.1 14.7 32.2 26.9c5.2 12.3-.1 31.2 5.2 44.3 5.2 13.1 21.1 20.5 23.9 33s-7.4 30-10.6 44.1.7 24.9 9 36.7c8.3 11.9 20.9 24.8 33.6 37.8h-344.8z" fill="%23623965"/%3E%3Cpath d="m0-287.3c11.1 6.9 22.2 13.8 32.5 19.3 10.4 5.4 20.1 9.4 30.9 10.7s22.8-.1 32.3 4.8c9.6 5 16.6 16.4 23.1 26.2 6.5 9.7 12.4 17.7 23.9 19.5 11.5 1.9 28.6-2.5 40.1.5 11.4 2.9 17.3 13.1 26.8 20.6s22.5 12.3 26.9 22.5c4.3 10.2-.1 25.9 4.2 36.9 4.4 10.9 17.6 17.1 19.9 27.5 2.4 10.3-6.1 25-8.8 36.7-2.6 11.8.7 20.7 7.5 30.6 6.9 9.9 17.5 20.7 28 31.5h-287.3z" fill="%2396446e"/%3E%3Cpath d="m0-229.9c8.9 5.6 17.7 11.1 26 15.5 8.3 4.3 16.1 7.5 24.7 8.6 8.7 1 18.3-.2 25.9 3.8s13.2 13.2 18.4 20.9c5.2 7.8 10 14.2 19.2 15.7s22.8-2 32 .4c9.2 2.3 13.9 10.5 21.5 16.5 7.5 5.9 18 9.7 21.5 17.9 3.4 8.2-.1 20.8 3.4 29.5 3.5 8.8 14 13.7 15.9 22s-4.9 20-7 29.4c-2.1 9.5.5 16.6 6 24.5s13.9 16.6 22.4 25.2h-229.9z" fill="%23c55469"/%3E%3Cpath d="m0-172.4c6.7 4.2 13.3 8.3 19.5 11.6 6.3 3.3 12.1 5.7 18.6 6.4 6.4.8 13.6-.1 19.3 2.9 5.8 3 10 9.9 13.9 15.7s7.4 10.6 14.3 11.7 17.2-1.5 24.1.3c6.8 1.8 10.4 7.9 16 12.4 5.7 4.5 13.6 7.3 16.2 13.5 2.6 6.1-.1 15.5 2.5 22.1 2.7 6.6 10.6 10.3 12 16.5s-3.7 15-5.3 22.1c-1.6 7 .4 12.4 4.5 18.3s10.5 12.4 16.8 18.9h-172.4z" fill="%23e9705a"/%3E%3Cpath d="m0-114.9c4.4 2.7 8.9 5.5 13 7.7 4.2 2.2 8 3.8 12.4 4.3 4.3.5 9.1-.1 12.9 1.9s6.6 6.6 9.2 10.5c2.6 3.8 5 7.1 9.6 7.8s11.4-1 16 .2 6.9 5.2 10.7 8.2 9.1 4.9 10.8 9-.1 10.4 1.7 14.8c1.7 4.3 7 6.8 8 11 .9 4.1-2.5 10-3.6 14.7-1 4.7.3 8.3 3 12.2 2.8 4 7 8.3 11.2 12.6h-114.9z" fill="%23fa9845"/%3E%3Cpath d="m0-57.5c2.2 1.4 4.4 2.8 6.5 3.9s4 1.9 6.2 2.1c2.1.3 4.5 0 6.4 1 2 1 3.4 3.3 4.7 5.2 1.3 2 2.4 3.6 4.7 3.9 2.3.4 5.8-.5 8.1.1 2.2.6 3.4 2.7 5.3 4.2s4.5 2.4 5.4 4.5c.9 2 0 5.1.8 7.3.9 2.2 3.6 3.5 4 5.5.5 2.1-1.2 5-1.7 7.4-.6 2.3.1 4.1 1.5 6.1 1.3 2 3.5 4.1 5.6 6.3h-57.5z" fill="%23fbae3c"/%3E%3C/g%3E%3C/svg%3E');
                background-attachment: fixed;
                background-size: cover;
            }

            h1 {
                font-size: 1.5em;
                color: #525252;
            }

            .box {
                background:white;
                width: 300px;
                border-radius: 6px;
                margin: 0 auto 0 auto;
                padding: 0px 0px 70px 0px;
                border: #ccc 4px solid; 
            }

            .url {
                background:#ecf0f1;
                border: #ccc 1px solid;
                border-bottom: #ccc 2px solid;
                padding: 8px;
                width: 250px;
                color:#AAAAAA;
                margin-top:10px;
                font-size:1em;
                border-radius:4px;
            }

            #shorten-button {
                display: block;
                background:#623965;
                width: 250px;
                padding: 8px;
                color:white;
                border-radius:4px;
                border: #623965 1px solid;
                cursor: pointer;
                
                margin-top:20px;
                margin-bottom:20px;
                float:left;
                margin-left:16px;
                font-weight:800;
                font-size:0.8em;
            }

            #shorten-button:hover {
                background:#854d89; 
            }

            p {
                color: black;
                text-align: left;
                margin: 0 0 0 20px;
                font-size: .9em;
            }
        </style>
    </head>
    <body>
        <div class="box">
            <h1>Shorten URL</h1>
            
            <input id="url" type="text" placeholder="long url" class="url" />
            <p>expires in</p>
            <input id="expiry" type="number" value="30" class="url" />
            <p>days</p>
              
            <div id="shorten-button" href="#">Shorten</div>
            <p id="shortened-url"></p>
        </div>
    </body>
    <script>
        const shortenButton = document.getElementById('shorten-button')
        const shortenedUrl = document.getElementById('shortened-url')
        const url = document.getElementById('url')
        const expiry = document.getElementById('expiry')

        url.focus()

        shortenButton.addEventListener('click', async () => {
            shortenButton.text = 'Shortening...'
            let res = null
            try {
                res = await fetch('https://unpar.link/create', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    long_url: url.value,
                    expiry: expiry.value
                })
            })
            } catch (e) {
                shortenButton.text = 'Shorten'
                shortenedUrl.innerHTML = 'Error'
                return
            }

            if (res.status !== 200) {
                shortenButton.text = 'Shorten'
                shortenedUrl.innerHTML = 'Error'
                console.log(res)
                return
            }

            const data = await res.json()
            shortenedUrl.innerText = data.url

            shortenButton.text = 'Shorten'
            url.value = ''
        })
    </script>
</html>